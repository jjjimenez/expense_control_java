<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template/layout.xhtml">
    <ui:define name="title">Dashboard - Expense Control</ui:define>
    
    <ui:define name="content">
        <f:metadata>
            <f:viewAction action="#{authController.requireLogin()}"/>
        </f:metadata>

        <div class="dashboard-container">
            <h1>Dashboard</h1>
            <p>Welcome, #{authController.currentUser.fullName}</p>

            <div class="dashboard-grid">
                <!-- Tarjetas de informaciÃ³n -->
                <div class="dashboard-card">
                    <p:panel header="User Information" styleClass="info-card">
                        <h:panelGrid columns="2" styleClass="user-info">
                            <h:outputText value="Username:"/>
                            <h:outputText value="#{authController.currentUser.username}"/>
                            
                            <h:outputText value="Email:"/>
                            <h:outputText value="#{authController.currentUser.email}"/>
                            
                            <h:outputText value="Role:"/>
                            <h:outputText value="#{authController.currentUser.role}"/>
                            
                            <h:outputText value="Status:"/>
                            <h:outputText value="#{authController.currentUser.active ? 'Active' : 'Inactive'}"/>
                        </h:panelGrid>
                    </p:panel>
                </div>

                <!-- Quick actions -->
                <div class="dashboard-card">
                    <p:panel header="Quick Actions" styleClass="actions-card">
                        <div class="quick-actions">
                            <h:form rendered="#{authController.admin}">
                                <p:button value="Manage Users" 
                                          href="#{request.contextPath}/admin/users.xhtml"
                                          icon="pi pi-users"
                                          styleClass="p-button-outlined"/>
                            </h:form>
                            
                            <h:form>
                                <p:commandButton value="My Profile" 
                                               icon="pi pi-user-edit"
                                               styleClass="p-button-outlined"
                                               disabled="true"/>
                            </h:form>
                        </div>
                    </p:panel>
                </div>

                <!-- Statistics (placeholder) -->
                <div class="dashboard-card full-width">
                    <p:panel header="System Statistics" styleClass="stats-card">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <i class="pi pi-users stat-icon"></i>
                                <div class="stat-content">
                                    <h3>Total Users</h3>
                                    <p class="stat-number">#{userService.totalUserCount}</p>
                                </div>
                            </div>
                            
                            <div class="stat-item">
                                <i class="pi pi-check-circle stat-icon"></i>
                                <div class="stat-content">
                                    <h3>Active Users</h3>
                                    <p class="stat-number">#{userService.activeUserCount}</p>
                                </div>
                            </div>
                            
                            <div class="stat-item">
                                <i class="pi pi-calendar stat-icon"></i>
                                <div class="stat-content">
                                    <h3>Registration Date</h3>
                                    <p class="stat-text">
                                        <h:outputText value="#{authController.currentUser.createdAt != null ? authController.currentUser.createdAt.toString() : 'Not available'}"/>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </p:panel>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
</html>