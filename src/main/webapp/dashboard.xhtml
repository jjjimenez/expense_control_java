<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/template/layout.xhtml">
    <ui:define name="title">Dashboard - Expense Control</ui:define>
    
    <ui:define name="content">
        <f:metadata>
            <f:viewAction action="#{authController.requireLogin()}"/>
        </f:metadata>

        <div class="dashboard-container">
            <h1>Dashboard</h1>
            <p>Bienvenido, #{authController.currentUser.fullName}</p>

            <div class="dashboard-grid">
                <!-- Tarjetas de información -->
                <div class="dashboard-card">
                    <p:panel header="Información del Usuario" styleClass="info-card">
                        <h:panelGrid columns="2" styleClass="user-info">
                            <h:outputText value="Usuario:"/>
                            <h:outputText value="#{authController.currentUser.username}"/>
                            
                            <h:outputText value="Email:"/>
                            <h:outputText value="#{authController.currentUser.email}"/>
                            
                            <h:outputText value="Rol:"/>
                            <h:outputText value="#{authController.currentUser.role}"/>
                            
                            <h:outputText value="Estado:"/>
                            <h:outputText value="#{authController.currentUser.active ? 'Activo' : 'Inactivo'}"/>
                        </h:panelGrid>
                    </p:panel>
                </div>

                <!-- Acciones rápidas -->
                <div class="dashboard-card">
                    <p:panel header="Acciones Rápidas" styleClass="actions-card">
                        <div class="quick-actions">
                            <h:form rendered="#{authController.admin}">
                                <p:commandButton value="Gestionar Usuarios" 
                                               outcome="users"
                                               icon="pi pi-users"
                                               styleClass="p-button-outlined"/>
                            </h:form>
                            
                            <h:form>
                                <p:commandButton value="Mi Perfil" 
                                               icon="pi pi-user-edit"
                                               styleClass="p-button-outlined"
                                               disabled="true"/>
                            </h:form>
                        </div>
                    </p:panel>
                </div>

                <!-- Estadísticas (placeholder) -->
                <div class="dashboard-card full-width">
                    <p:panel header="Estadísticas del Sistema" styleClass="stats-card">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <i class="pi pi-users stat-icon"></i>
                                <div class="stat-content">
                                    <h3>Usuarios Totales</h3>
                                    <p class="stat-number">#{userService.totalUserCount}</p>
                                </div>
                            </div>
                            
                            <div class="stat-item">
                                <i class="pi pi-check-circle stat-icon"></i>
                                <div class="stat-content">
                                    <h3>Usuarios Activos</h3>
                                    <p class="stat-number">#{userService.activeUserCount}</p>
                                </div>
                            </div>
                            
                            <div class="stat-item">
                                <i class="pi pi-calendar stat-icon"></i>
                                <div class="stat-content">
                                    <h3>Fecha de Registro</h3>
                                    <p class="stat-text">
                                        <h:outputText value="#{authController.currentUser.createdAt}">
                                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                                        </h:outputText>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </p:panel>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
</html>